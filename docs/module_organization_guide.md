# 仓库组织指南

## 目录结构原则
- **对外接口 (`pkg/`)**：仅包含接口、配置、错误定义以及轻量工具函数。
- **实现 (`internal/`)**：按组件划分子目录，再按实现类型划分（二级目录）。
- **入口 (`cmd/`)**：不同可执行程序独立子目录，入口仅启动容器。
- **配置 (`configs/`)**：提供默认配置与本地示例，避免硬编码。
- **文档 (`docs/`)**：组件说明、使用指南、设计决策录。

## 命名规范
- 组件目录使用小写，单词用连字符或下划线分隔（优先下划线）。
- 接口/结构体/函数使用驼峰命名。
- 测试文件以 `_test.go` 结尾，示例以 `_example_test.go` 结尾。

## 依赖管理
- 使用单一 `go.mod`；组件只通过接口相互引用。
- 第三方依赖只在 `internal` 曝露，禁止渗透到 `pkg`。
- 更新依赖后运行 `go mod tidy`，确保 `go.sum` 干净。

## 配置管理
- 所有配置结构集中在 `pkg/<component>/config.go`。
- 默认配置放在 `configs/<component>.yaml`（或合并在主配置中）。
- `config` 组件负责加载并注入，业务不直接解析文件。

## 文档同步
- 每次调整接口或行为必须同步更新 `docs/`。
- 在 PR 描述中列出对应文档链接，方便 review。

## 示例与实验
- 示例程序放在 `examples/<scenario>`。
- 实验性功能放在 `internal/experimental`，明确风险说明。
